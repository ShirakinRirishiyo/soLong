#include <stdio.h>

#define N 12
#define M 44

int findPath(char maze[N][M], int visited[N][M], int i, int j) {
    // Caso base: si llegamos a la salida
    if (maze[i][j] == 'E') {
        printf("Llegamos a la salida (%d, %d)\n", i, j);
        return 1;
    }
    
    // Marcar la celda actual como visitada
    visited[i][j] = 1;

    // Movimiento posible (arriba, abajo, izquierda, derecha)
    int moveI[] = {-1, 1, 0, 0};
    int moveJ[] = {0, 0, -1, 1};

    for (int k = 0; k < 4; k++) {
        int nextI = i + moveI[k];
        int nextJ = j + moveJ[k];

        // Verificar si el siguiente movimiento es válido
        if (nextI >= 0 && nextI < N && nextJ >= 0 && nextJ < M &&
            maze[nextI][nextJ] != '1' && visited[nextI][nextJ] == 0) {
            printf("Moviendo a (%d, %d)\n", nextI, nextJ);

            if (findPath(maze, visited, nextI, nextJ)) {
                return 1; // Encontramos la salida
            }
        }
    }

    // Desmarcar la celda actual para permitir otras rutas
    visited[i][j] = 0;
    return 0; // No se encontró la salida desde esta ruta
}

int main() {
    char maze[N][M] = {
    {'1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'},
    {'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'},
    {'1', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'},
    {'1', '0', '0', 'P', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'},
    {'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1'},
    {'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '1', '1'},
    {'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1'},
    {'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1'},
    {'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'E', '0', 'C', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '1', '1', '1'},
    {'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '0', '0', 'C', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1'},
    {'1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'}
};
    
    int visited[N][M] = {0};
    int startI = 0, startJ = 0;

    printf("Buscando camino desde (%d, %d)\n", startI, startJ);
    if (findPath(maze, visited, startI, startJ)) {
        printf("¡Camino encontrado!\n");
    } else {
        printf("No se encontró ningún camino.\n");
    }

    return 0;
}
